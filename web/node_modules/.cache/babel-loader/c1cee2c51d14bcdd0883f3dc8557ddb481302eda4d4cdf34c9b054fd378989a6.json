{"ast":null,"code":"import{create}from'zustand';export const useAuthStore=create(set=>({user:null,isAuthenticated:false,loading:true,login:async(username,password)=>{set({loading:true});try{const response=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(response.ok){const data=await response.json();set({user:data.user,isAuthenticated:true,loading:false});localStorage.setItem('token',data.token);}else{set({loading:false});}}catch(error){set({loading:false});console.error('Login xatosi:',error);}},logout:()=>{set({user:null,isAuthenticated:false});localStorage.removeItem('token');},setLoading:loading=>set({loading})}));","map":{"version":3,"names":["create","useAuthStore","set","user","isAuthenticated","loading","login","username","password","response","fetch","method","headers","body","JSON","stringify","ok","data","json","localStorage","setItem","token","error","console","logout","removeItem","setLoading"],"sources":["/home/ctrl/PROJECT/Nazoratchi/web/src/store/authStore.ts"],"sourcesContent":["import { create } from 'zustand';\n\ninterface User {\n  id: string;\n  name: string;\n  role: string;\n  organization: string;\n}\n\ninterface AuthStore {\n  user: User | null;\n  isAuthenticated: boolean;\n  loading: boolean;\n  login: (username: string, password: string) => Promise<void>;\n  logout: () => void;\n  setLoading: (loading: boolean) => void;\n}\n\nexport const useAuthStore = create<AuthStore>((set) => ({\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  login: async (username: string, password: string) => {\n    set({ loading: true });\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        set({\n          user: data.user,\n          isAuthenticated: true,\n          loading: false,\n        });\n        localStorage.setItem('token', data.token);\n      } else {\n        set({ loading: false });\n      }\n    } catch (error) {\n      set({ loading: false });\n      console.error('Login xatosi:', error);\n    }\n  },\n  logout: () => {\n    set({\n      user: null,\n      isAuthenticated: false,\n    });\n    localStorage.removeItem('token');\n  },\n  setLoading: (loading: boolean) => set({ loading }),\n}));\n"],"mappings":"AAAA,OAASA,MAAM,KAAQ,SAAS,CAkBhC,MAAO,MAAM,CAAAC,YAAY,CAAGD,MAAM,CAAaE,GAAG,GAAM,CACtDC,IAAI,CAAE,IAAI,CACVC,eAAe,CAAE,KAAK,CACtBC,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,KAAAA,CAAOC,QAAgB,CAAEC,QAAgB,GAAK,CACnDN,GAAG,CAAC,CAAEG,OAAO,CAAE,IAAK,CAAC,CAAC,CACtB,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,iBAAiB,CAAE,CAC9CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAER,QAAQ,CAAEC,QAAS,CAAC,CAC7C,CAAC,CAAC,CAEF,GAAIC,QAAQ,CAACO,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClChB,GAAG,CAAC,CACFC,IAAI,CAAEc,IAAI,CAACd,IAAI,CACfC,eAAe,CAAE,IAAI,CACrBC,OAAO,CAAE,KACX,CAAC,CAAC,CACFc,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,IAAI,CAACI,KAAK,CAAC,CAC3C,CAAC,IAAM,CACLnB,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACzB,CACF,CAAE,MAAOiB,KAAK,CAAE,CACdpB,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACvBkB,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACF,CAAC,CACDE,MAAM,CAAEA,CAAA,GAAM,CACZtB,GAAG,CAAC,CACFC,IAAI,CAAE,IAAI,CACVC,eAAe,CAAE,KACnB,CAAC,CAAC,CACFe,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CACDC,UAAU,CAAGrB,OAAgB,EAAKH,GAAG,CAAC,CAAEG,OAAQ,CAAC,CACnD,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}