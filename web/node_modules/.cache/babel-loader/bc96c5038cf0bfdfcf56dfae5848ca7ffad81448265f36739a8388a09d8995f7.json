{"ast":null,"code":"import { create } from 'zustand';\nexport const useAuthStore = create(set => ({\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  login: async (username, password) => {\n    set({\n      loading: true\n    });\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        set({\n          user: data.user,\n          isAuthenticated: true,\n          loading: false\n        });\n        localStorage.setItem('token', data.token);\n      } else {\n        set({\n          loading: false\n        });\n      }\n    } catch (error) {\n      set({\n        loading: false\n      });\n      console.error('Login xatosi:', error);\n    }\n  },\n  logout: () => {\n    set({\n      user: null,\n      isAuthenticated: false\n    });\n    localStorage.removeItem('token');\n  },\n  setLoading: loading => set({\n    loading\n  })\n}));","map":{"version":3,"names":["create","useAuthStore","set","user","isAuthenticated","loading","login","username","password","response","fetch","method","headers","body","JSON","stringify","ok","data","json","localStorage","setItem","token","error","console","logout","removeItem","setLoading"],"sources":["/home/ctrl/PROJECT/Nazoratchi/web/src/store/authStore.ts"],"sourcesContent":["import { create } from 'zustand';\n\ninterface User {\n  id: string;\n  name: string;\n  role: string;\n  organization: string;\n}\n\ninterface AuthStore {\n  user: User | null;\n  isAuthenticated: boolean;\n  loading: boolean;\n  login: (username: string, password: string) => Promise<void>;\n  logout: () => void;\n  setLoading: (loading: boolean) => void;\n}\n\nexport const useAuthStore = create<AuthStore>((set) => ({\n  user: null,\n  isAuthenticated: false,\n  loading: true,\n  login: async (username: string, password: string) => {\n    set({ loading: true });\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        set({\n          user: data.user,\n          isAuthenticated: true,\n          loading: false,\n        });\n        localStorage.setItem('token', data.token);\n      } else {\n        set({ loading: false });\n      }\n    } catch (error) {\n      set({ loading: false });\n      console.error('Login xatosi:', error);\n    }\n  },\n  logout: () => {\n    set({\n      user: null,\n      isAuthenticated: false,\n    });\n    localStorage.removeItem('token');\n  },\n  setLoading: (loading: boolean) => set({ loading }),\n}));\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAkBhC,OAAO,MAAMC,YAAY,GAAGD,MAAM,CAAaE,GAAG,KAAM;EACtDC,IAAI,EAAE,IAAI;EACVC,eAAe,EAAE,KAAK;EACtBC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAAK;IACnDN,GAAG,CAAC;MAAEG,OAAO,EAAE;IAAK,CAAC,CAAC;IACtB,IAAI;MACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,iBAAiB,EAAE;QAC9CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAER,QAAQ;UAAEC;QAAS,CAAC;MAC7C,CAAC,CAAC;MAEF,IAAIC,QAAQ,CAACO,EAAE,EAAE;QACf,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;QAClChB,GAAG,CAAC;UACFC,IAAI,EAAEc,IAAI,CAACd,IAAI;UACfC,eAAe,EAAE,IAAI;UACrBC,OAAO,EAAE;QACX,CAAC,CAAC;QACFc,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACI,KAAK,CAAC;MAC3C,CAAC,MAAM;QACLnB,GAAG,CAAC;UAAEG,OAAO,EAAE;QAAM,CAAC,CAAC;MACzB;IACF,CAAC,CAAC,OAAOiB,KAAK,EAAE;MACdpB,GAAG,CAAC;QAAEG,OAAO,EAAE;MAAM,CAAC,CAAC;MACvBkB,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACvC;EACF,CAAC;EACDE,MAAM,EAAEA,CAAA,KAAM;IACZtB,GAAG,CAAC;MACFC,IAAI,EAAE,IAAI;MACVC,eAAe,EAAE;IACnB,CAAC,CAAC;IACFe,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;EAClC,CAAC;EACDC,UAAU,EAAGrB,OAAgB,IAAKH,GAAG,CAAC;IAAEG;EAAQ,CAAC;AACnD,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}